{% extends "base.html" %}
{% block content %}
   <div class="container">
      <div class="hero-unit">
        <h2>Центр управления</h2>
        <hr>  
        {% if host_info %}
        <table class="table table-condensed">
            <thead>
              <tr>
                <th>Имя хоста:</th>
                <th>IP address:</th>
                <th>KVM логин:</th>
                <th>Статус:</th>
                <th>Управление</th>
                <th>Действие</th>
              </tr>
            </thead>
            <tbody>
                {% for name, info in host_info.items %}
                <tr>
                  <td>{{ name }}</td>
                  <td>{{ info.1 }}</td>
                  <td>{{ info.2 }}</td>
                  <td>{% if info.4 == 1 %}<font color="green">доступен</font>{% else %}<font color="red">не доступен</font>{% endif %}</td>
                  <td>{% if info.4 == 1 %}<button class="btn btn-primary" onclick="location.href='/overview/{{ info.0 }}/'">Управление</button>{% else %}<a href="#" class="btn btn-primary disabled">Управление</a>{% endif %}
                  </td>
                  <td>
                    <form action="/dashboard/" method="post">
                      <input type="hidden" name="host" value="{{name}}">
                      <input type="submit" class="btn btn-primary" name="delete" value="Удалить" onclick="return confirm('Вы уверены?')">
                    </form>
                  </td>
                </tr>
                {% endfor %}
          </tbody>
          </table>
        {% if errors %}
          {% for error in errors %}
            <div class="alert alert-error" style="width:275px">
              <a class="close" data-dismiss="alert">&times;</a>
              {{ error }}
            </div>
          {% endfor %}
        {% endif %}
        {% else %}
          <h4>У Вас отсутствуют подключения к хостам.</h4><br>
        {% endif %}
        <div id="myModal" class="modal hide fade">
            <div class="modal-header">
              <button class="close" data-dismiss="modal">&times;</button>
                <h3>Подключить новый хост</h3>
            </div>
         <div class="modal-body">
            <form class="form-horizontal" action="/dashboard/" method="post">
              <fieldset>
                <div class="control-group">
                <label class="control-label">Имя хоста</label>
                  <div class="controls">
                    <input type="text" name="name" class="input-large focused" placeholder="Name">
                  </div>
                 </div>
                <div class="control-group">
                <label class="control-label">IP адрес</label>
                  <div class="controls">
                    <input type="text" name="ipaddr" class="input-large" placeholder="192.168.1.1">
                  </div>
                </div>
                <div class="control-group">
                <label class="control-label">KVM Логин</label>
                  <div class="controls">
                    <input type="text" name="sshusr" class="input-large" placeholder="Name">
                  </div>
                </div>
                <div class="control-group">
                <label class="control-label">KVM Пароль</label>
                  <div class="controls">
                    <input type="password" name="passw" class="input-large" placeholder="Password">
                  </div>
                </div>
                </fieldset>
            </div>
            <div class="modal-footer">
              <a href="#" class="btn" data-dismiss="modal">Отмена</a>
                <input type="submit" class="btn btn-primary" name="add" value="Добавить">
             </form>
            </div>
          </div>            
         <a data-toggle="modal" href="#myModal" class="btn btn-primary">Подключить</a>
   </div>
{% endblock %}
